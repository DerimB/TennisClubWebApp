async function populateTimeOptions(e){var i=document.getElementById(e);if(i){i.innerHTML="",console.log("Cleared existing options for "+e);var t=document.createElement("option");t.value="",t.textContent="Please select time",t.disabled=!0,t.selected=!0,i.appendChild(t),console.log("Added placeholder option");let a=document.getElementById("date").value,o=(document.getElementById("date").addEventListener("change",function(){var e=this.value;document.getElementById("display-date").textContent=e}),[]);if(a)try{console.log("Fetching reservations for date: "+a);var n=await fetch("http://localhost:5000/api/reservations",{method:"GET",headers:{"Content-Type":"application/json"}});n.ok?(o=await n.json(),console.log("Fetched reservations:",o)):console.error("Failed to fetch reservations:",await n.text())}catch(e){console.error("Error fetching reservations:",e)}else console.log("No date selected, skipping reservation fetch");for(let t=6;t<=20;t++)for(let e=6===t?30:0;e<60&&!(14===t&&30<e);e+=30){let n=t.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0");console.log("Checking availability for time: "+n);var r,l=!o.some(e=>{var t=e.start_time,o=e.end_time;return e.date===a&&(n>=t&&n<o||parseTimeToMinutes(n)<parseTimeToMinutes(o)+30&&parseTimeToMinutes(n)>=parseTimeToMinutes(o))&&(console.log(`Removing start-time option: ${n} because it overlaps with an existing reservation or is within 30 minutes after.`),!0)});console.log(`Time: ${n}, Available: `+l),l&&(l=t<12?"AM":"PM",l=`${t%12==0?12:t%12}:${e.toString().padStart(2,"0")} `+l,(r=document.createElement("option")).value=n,r.textContent=l,i.appendChild(r),console.log("Added time option: "+l))}}else console.error(`Element with id "${e}" not found.`)}async function updateEndTimeOptions(){console.log("updateEndTimeOptions called");var o=document.getElementById("start-time"),n=document.getElementById("end-time"),a=(n.innerHTML="",console.log("Cleared existing end-time options"),document.createElement("option")),a=(a.value="",a.textContent="Please select time",a.disabled=!0,a.selected=!0,n.appendChild(a),console.log("Added placeholder option to end-time dropdown"),o.value);if(a){console.log("Selected start time: "+a);var[o,a]=a.split(":").map(Number);console.log(`Parsed start time: ${o} hour(s), ${a} minute(s)`);let e=o,t=a+30;for(;e<20||20===e&&t<=30;){60<=t&&(e+=1,t-=60);var i=e.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0"),r=(console.log("Generated end-time option: "+i),e<12?"AM":"PM"),r=`${e%12==0?12:e%12}:${t.toString().padStart(2,"0")} `+r,l=document.createElement("option");l.value=i,l.textContent=r,n.appendChild(l),t+=30}}else console.log("No start time selected, exiting function")}document.getElementById("date").addEventListener("change",()=>{populateTimeOptions("start-time")}),document.addEventListener("DOMContentLoaded",()=>{populateTimeOptions("start-time"),populateTimeOptions("end-time"),document.getElementById("start-time").addEventListener("change",updateEndTimeOptions)}),document.getElementById("submit-reservation").addEventListener("click",async function(e){e.preventDefault();try{var t=localStorage.getItem("user_id");if(t){var o=document.getElementById("date").value;if(o){var n=document.getElementById("start-time").value,a=document.getElementById("end-time").value;if(n&&a){var i=[];for(let e=1;e<=12;e++)i.push({user_id:parseInt(t),court_id:e,date:o,start_time:n,end_time:a,game_type:"event",guest_count_used:0,players:[]});var r,l,s=i.map(e=>fetch("http://localhost:5000/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),d=await Promise.all(s);let e=!0;for(r of d)r.ok||(e=!1,l=await r.json(),console.error("Failed to create reservation:",l.error));e?alert("All courts successfully reserved!"):alert("Some reservations failed. Please check the console for details.")}else alert("Please fill in all required fields.")}else alert("Please select a date.")}else alert("User not logged in. Please log in first.")}catch(e){console.error("Error creating reservations:",e),alert("An error occurred while creating the reservations.")}});
//# sourceMappingURL=admin-reserve-event.min.js.map
